<ion-header>
  <ion-toolbar color="primary">
    <ion-buttons shape="round" size="small" slot="start">
      <ion-menu-button menu="main-menu"></ion-menu-button>
    </ion-buttons>
    <ion-button shape="round" size="small" slot="end" (click)="createProperty()">
      <ion-icon color="light" slot="icon-only" name="add-circle"></ion-icon>
    </ion-button>
    <ion-title ion-text-center>Property</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" color="light">
  <div style="vertical-align: top">
    <swiper-container *ngFor="let property of propertyList">
      <swiper-slide>
      <ion-card>
        <ion-card-header color="secondary"></ion-card-header> 
        <ion-card-content class="ion-padding" color="light">
          <ion-list>
            <ion-item>
              <ion-button color="warning" shape="round" size="small" slot="end" (click)="openMenu(property?.id)">
                <ion-icon color="light" slot="icon-only" name="menu"></ion-icon>
              </ion-button>
              <ion-label>
                <h2>{{property?.name}}</h2>
                Purchase Date: <strong>{{property.purchasedate | date}}</strong><br /><br />
                Costs: <strong>{{property.purchasevalue | currency:"GBP"}}</strong><br /><br />
                Market Value: <strong>{{property.currentvalue| currency:"GBP"}}</strong><br /><br />
                Capital Gain: <strong>{{(property.currentvalue - property.purchasevalue) | currency:"GBP"}}</strong><br /><br />
                Gain: <strong>{{((property.currentvalue - property.purchasevalue) / property.purchasevalue) | percent:"1.2"}}</strong><br /><br />
                Notes: <strong>{{property.notes}}</strong><br />
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </swiper-slide>
    <swiper-slide>
      <ion-card>
        <ion-card-header color="secondary"></ion-card-header>
        <ion-card-content class="ion-padding" color="light">
          <ion-list>
            <ion-item>
              <ion-button color="warning" shape="round" size="small" slot="end" (click)="openMenu(property?.id)">
                <ion-icon color="light" slot="icon-only" name="menu"></ion-icon>
              </ion-button>
              <ion-label>
                <h2>Budget</h2>
                Rental Income: <strong>{{property.budgetannualincome | currency:"GBP"}}</strong><br />
                Insurance: <strong>{{property.budgetinsurance | currency:"GBP"}}</strong><br />
                Maintenance: <strong>{{property.budgetmaintenance | currency:"GBP"}}</strong><br />
                Management: <strong>{{property.budgetmanagement | currency:"GBP"}}</strong><br />
                Rates: <strong>{{property.budgetrates | currency:"GBP"}}</strong><br />
                Borrowing: <strong>{{property.budgetmortgage | currency:"GBP"}}</strong><br />
                Other Costs: <strong>{{property.budgetothercosts | currency:"GBP"}}</strong><br />
                Budget Profit: <strong>{{(property.budgetannualincome - (property.budgetinsurance + property.budgetmaintenance +
                  property.budgetmanagement + property.budgetmortgage + property.budgetothercosts + property.budgetrates)) | currency:"GBP"}}</strong><br />
                Net Margin: <strong>{{((property.budgetannualincome - (property.budgetinsurance + property.budgetmaintenance +
                property.budgetmanagement + property.budgetmortgage + property.budgetothercosts + property.budgetrates)) / property.budgetannualincome) | percent:"1.2"}}</strong><br />
                <br /><br />
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </swiper-slide>
    <swiper-slide>
      <ion-card>
        <ion-card-header color="secondary"></ion-card-header>
        <ion-card-content class="ion-padding" color="light">
          <ion-list>
            <ion-item>
              <ion-button color="warning" shape="round" size="small" slot="end" (click)="openMenu(property?.id)">
                <ion-icon color="light" slot="icon-only" name="menu"></ion-icon>
              </ion-button>
              <ion-label>
                <h2>Performance</h2>
                Rental Income: <strong>{{property.actualannualincome | currency:"GBP"}}</strong><br /><br />
                Costs: <strong>{{(property.actualinsurance + property.actualmaintenance + property.actualmanagement +
                  property.actualmortgage + property.actualothercosts + property.actualrates) | currency:"GBP"}}</strong><br /><br />
                Net Profit: <strong>{{(property.actualannualincome - (property.actualinsurance + property.actualmaintenance +
                  property.actualmanagement + property.actualmortgage + property.actualothercosts + property.actualrates)) | currency:"GBP"}}</strong><br /><br />
                Profit Margin: <strong>{{((property.actualannualincome - (property.actualinsurance + property.actualmaintenance +
                  property.actualmanagement + property.actualmortgage + property.actualothercosts + property.actualrates)) / property.actualannualincome) | percent:"1.2"}}</strong><br />
                  <br /><br /><br /><br />
              </ion-label>
            </ion-item>
          </ion-list>
        </ion-card-content>
      </ion-card>
    </swiper-slide>
  </swiper-container>
  <ion-card>
    <ion-card-header color="secondary"> Property Summary</ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item>
          <ion-label>
            Assets: <strong>{{propertyTotalValues | currency:"GBP"}}</strong>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            Income: <strong>{{propertyTotalIncome | currency:"GBP"}}</strong>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            Costs: <strong>{{propertyTotalCosts | currency:"GBP"}}</strong>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            P & L: <strong>{{propertyTotalIncome - propertyTotalCosts | currency:"GBP"}}</strong>
          </ion-label>
        </ion-item>
        <ion-item>
          <ion-label>
            Margin: <strong>{{(propertyTotalIncome - propertyTotalCosts) / propertyTotalValues | percent:"1.2"}}</strong>
          </ion-label>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  </div>
</ion-content>
