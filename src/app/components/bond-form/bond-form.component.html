<form [formGroup]="bondForm">
  <ion-card>
    <ion-card-header color="secondary"></ion-card-header>
    <ion-card-content class="ion-padding" color="light" width="100%">
      <ion-list>
        <ion-item (click)="[showPicker = !showPicker]">
          <ion-input value="{{formattedDate}}" 
          label="Bond Start Date"></ion-input>
        </ion-item>
        <ion-datetime *ngIf="showPicker"
          #datetime
          [value]="dateValue"
          size="cover"
          presentation="date"
          min="{{fromDate}}"
          max="{{toDate}}"
          (ionChange)="dateChanged(datetime.value)"
          showDefaultButtons="false">
        </ion-datetime>

        <ion-item>
          <ion-label color="secondary" position="stacked">Bond Name</ion-label>
          <ion-input formControlName="name" type="text" placeholder="What's your bond's name?"
            label="Bond Name" [class.invalid]="!bondForm.controls['name'].valid&& bondForm.controls['name'].touched">
          </ion-input>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['name'].valid &&
            bondForm.controls['name'].touched">
          <ion-label>Please enter an account name.</ion-label>
        </ion-item>

        <ion-item>
          <ion-label color="secondary" position="stacked">Account Number</ion-label>
          <ion-input formControlName="number" type="text" placeholder="What's your bond's account number?"
            label="Account Number" [class.invalid]="!bondForm.controls['number'].valid&& bondForm.controls['number'].touched">
          </ion-input>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['number'].valid &&
            bondForm.controls['number'].touched">
          <ion-label>Please enter an account number greater than 6 digits long.</ion-label>
        </ion-item>

        <ion-item>
          <ion-input formControlName="onlineid" type="text" placeholder="What's your bond's online ID?"
          label="Online ID">
          </ion-input>
        </ion-item>

        <ion-item>
          <ion-input formControlName="initialcash" type="number" placeholder="£"
          label="Cash Invested" [class.invalid]="!bondForm.controls['initialcash'].valid&& bondForm.controls['initialcash'].touched">
          </ion-input>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['initialcash'].valid &&
            bondForm.controls['initialcash'].touched">
          <ion-label>You must provide an initial cash balance.</ion-label>
        </ion-item>

        <ion-item>
          <ion-select formControlName="maturity" interface="popover" 
          label="Years To Maturity" [class.invalid]="!bondForm.controls['maturity'].valid&& bondForm.controls['maturity'].touched">
            <ion-select-option value="1">1</ion-select-option>
            <ion-select-option value="2">2</ion-select-option>
            <ion-select-option value="3">3</ion-select-option>
            <ion-select-option value="4">4</ion-select-option>
            <ion-select-option value="5">5</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['maturity'].valid &&
            bondForm.controls['maturity'].touched">
          <ion-label>Please select number of years to maturity.</ion-label>
        </ion-item>

        <ion-item>
          <ion-input formControlName="interestrate" type="number" placeholder="%" 
          label="Bond Annual Interest Rate" [class.invalid]="!bondForm.controls['interestrate'].valid&& bondForm.controls['interestrate'].touched">
          </ion-input>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['interestrate'].valid &&
            bondForm.controls['interestrate'].touched">
          <ion-label>Please enter the bonds annual interest rate.</ion-label>
        </ion-item>

        <ion-item>
          <ion-input formControlName="interestpayable" type="number" placeholder="£"
          label="Interest Payable" [class.invalid]="!bondForm.controls['interestpayable'].valid&& bondForm.controls['interestpayable'].touched">
          </ion-input>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['interestpayable'].valid &&
          bondForm.controls['interestpayable'].touched">
          <ion-label>Please enter interest amount paid.</ion-label>
        </ion-item>

        <ion-item>
          <ion-select formControlName="frequency" interface="popover"
          label="Interest Frequency" [class.invalid]="!bondForm.controls['frequency'].valid&& bondForm.controls['frequency'].touched">
            <ion-select-option value="Monthly">Monthly</ion-select-option>
            <ion-select-option value="Quarterly">Quarterly</ion-select-option>
            <ion-select-option value="Annually">Annually</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['frequency'].valid &&
          bondForm.controls['frequency'].touched">
          <ion-label>Please select frequency of interest paid.</ion-label>
        </ion-item> 

        <ion-item>
          <ion-select formControlName="taxable" interface="popover"
          label="Bond Taxable?" [class.invalid]="!bondForm.controls['taxable'].valid&& bondForm.controls['taxable'].touched">
            <ion-select-option value="No">No</ion-select-option>
            <ion-select-option value="Yes">Yes</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['taxable'].valid &&
            bondForm.controls['taxable'].touched">
          <ion-label>Please select whether the bond in taxable or not.</ion-label>
        </ion-item>

        <ion-item>
          <ion-select formControlName="forecast" interface="popover"
          label="Include in forecast?" [class.invalid]="!bondForm.controls['forecast'].valid&& bondForm.controls['forecast'].touched">
            <ion-select-option [value]="false">No</ion-select-option>
            <ion-select-option [value]="true">Yes</ion-select-option>
          </ion-select>
        </ion-item>
        <ion-item class="error-message" *ngIf="!bondForm.controls['forecast'].valid &&
                    bondForm.controls['forecast'].touched">
        <ion-label>Include in forecast calculations?</ion-label>
        </ion-item>

        <ion-item>
          <ion-textarea formControlName="notes" rows="6" cols="20"
          label="Notes">
          </ion-textarea>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card>
    <ion-card-header color="secondary">Security Hints</ion-card-header>
    <ion-card-content class="ion-padding" color="light" width="100%">
      <ion-list>
        <ion-item>
          <ion-input formControlName="passwordhint" type="text" placeholder="Think of a password hint?"
          label="Password Hint (not your password!)">
          </ion-input>
        </ion-item>

        <ion-item>
          <ion-input formControlName="memorableplace" type="text" placeholder="Memorable place hint (if required)?"
          label="Memorable Place Hint">
          </ion-input>
        </ion-item>

        <ion-item>
          <ion-input formControlName="memorablename" type="text" placeholder="Memorable name hint (if required)?"
          label="Memorable Name Hint">
          </ion-input>
        </ion-item>

        <ion-item>
          <ion-input formControlName="memorabledate" type="text" placeholder="Memorable date hint (if required)?"
          label="Memorable Date Hint">
          </ion-input>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-button (click)="submitCredentials(bondForm)" expand="block" [disabled]="!bondForm.valid">
    {{ actionButtonText }}
  </ion-button>
</form>
